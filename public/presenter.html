<!DOCTYPE html>
<html lang="it">
 <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz - Relatore</title>
  <link
   rel="icon"
   type="image/png"
   sizes="32x32"
   href="media/favicon-32x32.png" />
  <link
   rel="stylesheet"
   href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <link
   rel="stylesheet"
   href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <link
   href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
   rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
 </head>
 <body>
  <div class="text-center my-3">
   <img
    src="https://www.laboratoriodellafarmacia.it/build/images/logo/logo_laboratorio.3ef25cbe.svg"
    alt="Laboratorio della Farmacia"
    style="max-width: 150px" />
  </div>
  <div id="fab-container">
   <button id="fab-button">
    <i id="fab-icon" class="bi bi-gear-fill"></i>
   </button>
  </div>

  <!-- Modale per creare sessione -->
  <div id="createSessionModal" class="modal-overlay">
   <div class="modal-content" id="modalContent">
    <h2 class="modal-title mb-3">
     <i class="bi bi-gear-fill"></i> Configurazione Sessione
    </h2>
    <div id="sessionLink" style="display: block">
     <div class="d-flex gap-2 mb-4 mt-2">
      <select id="quizSelector" class="form-select">
       <option value="" disabled="" selected="">Seleziona un quiz...</option>
      </select>

      <button id="refreshQuizList" class="btn btn-outline-secondary mt-0">
       <i class="bi bi-arrow-clockwise"></i>
      </button>
     </div>
     <div class="mb-3">
      <label for="uploadQuizInput" class="form-label">
       <i class="bi bi-plus-circle"></i> Carica nuovo quiz (JSON)
      </label>
      <input
       type="file"
       id="uploadQuizInput"
       accept=".json"
       class="form-control" />
     </div>
     <div class="mb-3">
      <label for="questionDuration" class="form-label">
       <i class="bi bi-stopwatch"></i> Durata domande
      </label>
      <input
       type="number"
       id="questionDuration"
       class="form-control"
       value="60"
       min="10"
       max="300"
       step="5" />
      <small class="form-text text-muted"
       >Imposta la durata di ogni domanda (default: 60s)</small
      >
     </div>
     <div class="mb-3 d-flex gap-2">
      <input type="text" id="linkInput" class="form-control" readonly="" />
      <button
       id="copyLink"
       class="btn btn-outline-primary btn-sm d-flex align-items-center"
       style="margin-top: 0px">
       <i class="bi bi-clipboard me-1"></i> Copia link
      </button>
     </div>

     <div class="mb-2 d-flex gap-2">
      <strong>Codice sessione:</strong>
      <input type="text" id="codeDisplay" class="form-control" />

      <button
       id="confirmCode"
       class="btn btn-outline-success btn-sm"
       style="margin-top: 0px">
       <i class="bi bi-save"></i><br />
       Salva
      </button>
     </div>
     <div class="d-flex justify-content-center gap-2">
      <button id="createSession" class="btn btn-outline-success btn-sm">
       <i class="bi bi-plus-lg"></i> <br />Nuova Sessione
      </button>

      <button id="recoverCode" class="btn btn-outline-primary btn-sm">
       <i class="bi bi-arrow-repeat"></i><br />
       Recupera Sessione
      </button>
      <button id="debugLaunch" class="btn btn-outline-danger btn-sm">
       <i class="bi bi-bug"></i><br />
       Debug
      </button>
     </div>
    </div>

    <button id="scoreModeToggle" class="btn btn-secondary w-100 mb-2">
     <i class="bi bi-calculator"></i> Modalità punteggio: Completo
    </button>
    <button id="toggleAudio" class="btn btn-secondary w-100 mb-2">
     <i class="bi bi-volume-up-fill" id="audioIcon"></i> Audio Attivo
    </button>
     
     

<div class="text-center">
  <button id="closeModal" class="btn custom-close-button mb-2">
    <i class="bi bi-check-circle-fill"></i>
  </button>
</div>

   </div>
  </div>

  <div class="container quiz-container text-center">
   <div id="errorMessage" class="alert alert-danger" style="display: none" role="alert">
    <i class="bi bi-exclamation-triangle-fill me-2"></i>
    <span id="errorText">Si è verificato un errore</span>
   </div>

   <div id="lobbySection" class="lobby-section">
    <div class="participants-header">
     <h2 class="participants-title">
      <i class="bi bi-people-fill me-2"></i>Partecipanti
     </h2>
     <div class="participant-counter">
      <span id="participantCount" class="counter-number">0</span>
      <span class="counter-label">connessi</span>
     </div>
    </div>
    <div id="participantsCloud" class="participants-cloud" data-participants="0"></div>
   </div>

   <div class="start-quiz-section">
    <button id="startQuiz" class="btn btn-primary start-quiz-btn" disabled>
     <i class="bi bi-play-fill me-2"></i>
     <span>Inizia Quiz</span>
     <div class="btn-glow"></div>
    </button>
   </div>

   <div id="questionBox" class="question-box" style="display: none">
    <div class="question-header">
     <div id="questionCounter" class="question-counter"></div>
     <div id="timer" class="timer-display">
      <i class="bi bi-clock me-2"></i>
      <span class="timer-text">Preparazione...</span>
     </div>
    </div>
    
    <div class="question-content">
     <h3 id="questionText" class="question-text"></h3>
     <div id="answers" class="answers-grid"></div>
    </div>
    
    <div class="progress-container">
     <div class="progress progress-bar-container">
      <div id="bar" class="progress-bar progress-bar-animated"></div>
     </div>
    </div>

    <div id="questionControls" class="question-controls" style="display: none">
     <button id="endTime" class="btn btn-danger control-btn">
      <i class="bi bi-hourglass-bottom me-2"></i>
      <span>Termina tempo</span>
     </button>
     <button id="nextQuestion" class="btn btn-warning control-btn">
      <i class="bi bi-arrow-right-circle me-2"></i>
      <span>Domanda successiva</span>
     </button>
    </div>

    <div id="finalScoreBox" class="final-score-section" style="display: none">
     <button id="showRanking" class="btn btn-primary ranking-btn">
      <i class="bi bi-trophy-fill me-2"></i>
      <span>Mostra Classifica</span>
      <div class="btn-sparkle"></div>
     </button>
    </div>
   </div>

   <div id="finalScore" class="final-ranking"></div>
  </div>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>

  <script src="presenter.js"></script>
 </body>
</html>
